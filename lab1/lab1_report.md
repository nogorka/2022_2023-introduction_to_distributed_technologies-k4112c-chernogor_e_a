    University: [ITMO University](https://itmo.ru/ru/)
    Faculty: [FICT](https://fict.itmo.ru)
    Course: [Introduction to distributed technologies](https://github.com/itmo-ict-faculty/introduction-to-distributed-technologies)
    Year: 2022/2023
    Group: k4112c
    Author: Chernogor Ekaterina Alekseevna
    Lab: Lab1
    Date of create: 17.11.2022
    Date of finished: 


# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ1 "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker –∏ Minikube, –º–æ–π –ø–µ—Ä–≤—ã–π –º–∞–Ω–∏—Ñ–µ—Å—Ç."

## –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ –ø–µ—Ä–≤–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤ –∫–æ—Ç–æ—Ä–æ–π –≤—ã —Å–º–æ–∂–µ—Ç–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Docker, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Minikube –∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Å–≤–æ–π –ø–µ—Ä–≤—ã–π "–ø–æ–¥".

## –¶–µ–ª—å —Ä–∞–±–æ—Ç—ã

–û–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ Minikube –∏ Docker, —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Å–≤–æ–π –ø–µ—Ä–≤—ã–π "–ø–æ–¥".

## –•–æ–¥ —Ä–∞–±–æ—Ç—ã

### –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å [Docker](https://www.docker.com/) –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –µ–≥–æ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å [Minikube](https://minikube.sigs.k8s.io/docs/start/) 
3. –°–æ–∑–¥–∞—Ç—å alias –¥–ª—è –∫–æ–º–∞–Ω–¥—ã `minikube kubectl --`
```
$ alias kubectl="minikube kubectl --"
```
**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: 
–ò–∑–Ω–∞—á–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª–∞—Å—å –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –Ω–∞ –û–° Windows 10 Pro, —Å –ø–æ–º–æ—â—å—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Docker Desktop. –û–¥–Ω–∞–∫–æ –ø–æ—Å–ª–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ø—ã—Ç–æ–∫ –ø–æ—á–∏–Ω–∏—Ç—å –æ—à–∏–±–∫—É –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ `docker container stopped`, –±—ã–ª–æ –ø—Ä–∏–Ω—è—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ Ubuntu 20.4LTS. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —à–∞–≥–∞ –≤ —Ä–∞–º–∫–∞—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π –±–æ–ª–µ–µ –Ω–µ –≤–æ–∑–Ω–∏–∫–∞–ª–æ –ø—Ä–æ–±–ª–µ–º –∏–ª–∏ –æ—à–∏–±–æ–∫.


### –û—Å–Ω–æ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 
1. –î–ª—è –Ω–∞—á–∞–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–∑—É—á–∏—Ç—å —á—Ç–æ —Ç–∞–∫–æ–µ minikube, –ø–æ—á–µ–º—É –∏ –∫–∞–∫ –æ–Ω —Å–≤—è–∑–∞–Ω —Å kubernetes. –û–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –∏ –æ—Å–Ω–æ–≤–∞–º–∏ —Ä–∞–±–æ—Ç—ã k8s. –î–ª—è —ç—Ç–æ–≥–æ –±—ã–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã[1-10].
2. –î–∞–ª–µ–µ –±—ã–ª —Å–∫–∞—á–∞–Ω –æ–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞: [vault](https://hub.docker.com/_/vault/). 
```
$ docker pull vault
```
> Vault - —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ–∫—Ä–µ—Ç–∞–º. –°–µ–∫—Ä–µ—Ç - —ç—Ç–æ –≤—Å–µ, –∫ —á–µ–º—É –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏–º–µ—Ç—å —Å—Ç—Ä–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π –¥–æ—Å—Ç—É–ø, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–ª—é—á API, –ø–∞—Ä–æ–ª–∏, —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ. –•—Ä–∞–Ω–∏–ª–∏—â–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ª—é–±–æ–≥–æ —Å–µ–∫—Ä–µ—Ç–∞, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –ø—Ä–∏ —ç—Ç–æ–º –∂–µ—Å—Ç–∫–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ –∏ –∑–∞–ø–∏—Å—å –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –∂—É—Ä–Ω–∞–ª–∞ –∞—É–¥–∏—Ç–∞.
3. –î–∞–ª–µ–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –∫–ª–∞—Å—Ç–µ—Ä 
```
$ minikube start
```
![minikube start.jpg](imgs/1.png)
4. –í –∫–ª–∞—Å—Ç–µ—Ä–µ –±—ã–ª–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫ —Ä–µ—Å—É—Ä—Å—É —Å –ø–æ–º–æ—â—å—é `yaml` —Ñ–∞–π–ª–∞, –∏–ª–∏ –¥—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏ –±—ã–ª —Å–æ–∑–¥–∞–Ω pod –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ñ–∞–π–ª–∞ [`./lab1/manifest.yml`](manifest.yml)
```
$ kubectl apply -f ./lab1/manifest.yml
> service/vault created
```
5. –î–∞–ª–µ–µ –±—ã–ª —Å–æ–∑–¥–∞–Ω —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª–∏—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ø–æ–¥—É –∏–∑ –≤–Ω–µ—à–Ω–µ–π —Å—Ä–µ–¥—ã. –í –∫–ª–∞—Å—Ç–µ—Ä–µ –ø–æ–¥—ã –º–æ–≥—É—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º —á–µ—Ä–µ–∑ localhost, –æ–¥–Ω–∞–∫–æ, –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∏–∑–≤–Ω–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å –∏ –ø—Ä–æ–∫–∏–Ω—É—Ç—å –ø–æ—Ä—Ç—ã.
```
$ kubectl expose pod vault --type=NodePort --port=8200
> service/vault exposed
```
6. –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±—ã–ª –ø—Ä–æ–∫–∏–Ω—É—Ç –ø–æ—Ä—Ç 8200, –∏ —Ç–µ–ø–µ—Ä—å –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –ø–æ 8200 –ø–æ—Ä—Ç—É. –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä vault –º–æ–∂–Ω–æ –∑–∞–π—Ç–∏ –ø–æ —Å—Å—ã–ª–∫–µ http://localhost:8200
```
$ kubectl port-forward service/vault 8200:8200
> Forwarding from 127.0.0.1:8200 -> 8200
> Forwarding from [::1]:8200 -> 8200
> Handling connection for 8200
> Handling connection for 8200
> ...
```
7. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —à–∞–≥–∞ –æ—Ç–∫—Ä—ã–ª–∞—Å—å —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ª–æ–≥–∏–Ω–∞. 

![login page.jpg](imgs/2.png)

–ù–æ –¥–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –∑–∞–π—Ç–∏ –¥–∞–ª—å—à–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, —á—Ç–æ –µ—Å—Ç—å –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞–π—Ç–∏ —Ç–æ–∫–µ–Ω –≤—Ö–æ–¥–∞. –ü–æ—ç—Ç–æ–º—É –±—ã–ª–∏ –æ—Ç–∫—Ä—ã—Ç—ã –ª–æ–≥–∏, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –±—ã–ª –Ω–∞–π–¥–µ–Ω root token `hvs.QhYc70qMjzRC5i4qYKdAJlvb
`
```
$ kubectl logs vault
```
![logs.jpg](imgs/3.png)

8. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –∏ –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É –∫–ª–∞—Å—Ç–µ—Ä –±—ã–ª –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.
```
$ minikube stop
> ‚úã  Stopping node "minikube"  ...
> üõë  Powering off "minikube" via SSH ...
> üõë  1 node stopped.
```


## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –≤—ã–≤–æ–¥—ã
–í —Ö–æ–¥–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø–æ–ª—É—á–∏–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å pod –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞–ø–∏—Å–∞–Ω–Ω–æ–π [–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏](manifest.yml), —Å–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–¥–æ–º –∏ –∑–∞–π—Ç–∏ –≤–Ω—É—Ç—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –ù–∞ —Ä–∏—Å—É–Ω–∫–µ –Ω–∏–∂–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã –∫–ª–∞—Å—Ç–µ—Ä–∞
![scheme](imgs/4.png)
–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –≤—ã–ø–æ–ª–Ω–µ–Ω –≤—Ö–æ–¥ 
![result_image](imgs/5.png)

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –±—ã–ª–∏ –∏–∑—É—á–µ–Ω—ã –æ—Å–Ω–æ–≤—ã —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π.


# –°—Å—ã–ª–∫–∏ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
1. [Overview](https://kubernetes.io/docs/concepts/overview/)
2. [Pods](https://kubernetes.io/docs/concepts/workloads/pods/)
3. [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Minikube –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞](https://kubernetes.io/ru/docs/tutorials/kubernetes-basics/create-cluster/cluster-intro/)
4. [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ kubectl –¥–ª—è —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](https://kubernetes.io/ru/docs/tutorials/kubernetes-basics/deploy-app/deploy-intro/)
5. [–ò–∑—É—á–µ–Ω–∏–µ –ø–æ–¥–æ–≤ –∏ —É–∑–ª–æ–≤](https://kubernetes.io/ru/docs/tutorials/kubernetes-basics/explore/explore-intro/)
6. [–°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é](https://kubernetes.io/ru/docs/tutorials/kubernetes-basics/expose/expose-intro/)
7. [–ó–∞–ø—É—Å–∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](https://kubernetes.io/ru/docs/tutorials/kubernetes-basics/scale/scale-intro/)
8. [–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–ª–∞–≤–∞—é—â–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è](https://kubernetes.io/ru/docs/tutorials/kubernetes-basics/update/update-intro/)
9. [Exposing an External IP Address to Access an Application in a Cluster](https://kubernetes.io/docs/tutorials/stateless-application/expose-external-ip-address/)
10. [Connecting Applications with Services](https://kubernetes.io/docs/tutorials/services/connect-applications-service/)
